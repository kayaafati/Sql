-- Generated by Oracle SQL Developer Data Modeler 21.2.0.183.1957
--   at:        2021-08-30 21:24:17 EET
--   site:      Oracle Database 12cR2
--   type:      Oracle Database 12cR2



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE bins (
    bin_id                  NUMBER(10) NOT NULL,
    product_id              NUMBER(10) NOT NULL,
    warehouse_id            NUMBER(10) NOT NULL,
    bin_number              NUMBER(10),
    bin_type                CHAR(1),
    quantity                NUMBER(10),
    products_product_id     NUMBER NOT NULL,
    products_category_id    NUMBER(10) NOT NULL,
    warehouses_warehouse_id NUMBER(10) NOT NULL
);

ALTER TABLE bins
    ADD CONSTRAINT bins_pk PRIMARY KEY ( bin_id,
                                         product_id,
                                         warehouse_id );

CREATE TABLE customer_addresses (
    address_id            NUMBER(10) NOT NULL,
    customer_id           NUMBER(10) NOT NULL,
    flat_number           NUMBER(10),
    apartment_name        VARCHAR2(20),
    apartment_no          NUMBER(10),
    street_no             VARCHAR2(10),
    zip_code              CHAR(5),
    neighborhood          VARCHAR2(100),
    city                  VARCHAR2(10),
    country               VARCHAR2(50),
    "Default"             CHAR(1),
    vendor_id             NUMBER(10),
    customers_customer_ıd NUMBER(10) NOT NULL
);

ALTER TABLE customer_addresses ADD CONSTRAINT customer_addresses_pk PRIMARY KEY ( customer_id,
                                                                                  address_id );

CREATE TABLE customer_phones (
    phone_id              NUMBER(10) NOT NULL,
    customer_id           NUMBER(10) NOT NULL,
    phone_number          CHAR(20),
    phone_type            CHAR(1),
    customers_customer_ıd NUMBER(10) NOT NULL
);

ALTER TABLE customer_phones ADD CONSTRAINT customer_phones_pk PRIMARY KEY ( customer_id,
                                                                            phone_id );

CREATE TABLE customers (
    customer_ıd   NUMBER(10) NOT NULL,
    name          VARCHAR2(20) NOT NULL,
    midname       VARCHAR2(20),
    surname       VARCHAR2(20),
    dob           DATE,
    gender        CHAR(1),
    email_address VARCHAR2(100) NOT NULL,
    tckn          CHAR(11),
    credit_limit  NUMBER(12),
    blocked       CHAR(1)
);

ALTER TABLE customers ADD CONSTRAINT customers_pk PRIMARY KEY ( customer_ıd );

CREATE TABLE employee_address (
    address_id            NUMBER(10) NOT NULL,
    employee_id           NUMBER(10) NOT NULL,
    flat_number           NUMBER(10),
    apartment_name        VARCHAR2(20),
    apartment_no          NUMBER(10),
    street_no             NUMBER(10),
    zip_code              NUMBER(10),
    neighborhood          VARCHAR2(20),
    city                  VARCHAR2(20),
    country               VARCHAR2(20),
    "Default"             CHAR(1),
    employees_employee_id NUMBER(10) NOT NULL
);

ALTER TABLE employee_address ADD CONSTRAINT employee_address_pk PRIMARY KEY ( address_id,
                                                                              employee_id );

CREATE TABLE employee_communications (
    id                    NUMBER(10) NOT NULL,
    employee_id           NUMBER(10) NOT NULL,
    type                  CHAR(1),
    communication_data    CHAR(1),
    employees_employee_id NUMBER(10) NOT NULL
);

ALTER TABLE employee_communications ADD CONSTRAINT employee_communications_pk PRIMARY KEY ( employee_id,
                                                                                            id );

CREATE TABLE employees (
    employee_id     NUMBER(10) NOT NULL,
    first_name      VARCHAR2(20),
    mid_name        VARCHAR2(20),
    last_name       VARCHAR2(20),
    dob             DATE,
    tckn            NUMBER(11),
    department_id   NUMBER(10),
    salary          NUMBER(10),
    birth_place     VARCHAR2(20),
    employment_date DATE,
    fired_date      DATE,
    email           VARCHAR2(20),
    job             VARCHAR2(20),
    manager_id      NUMBER(10),
    phone_number    NUMBER(12)
);

ALTER TABLE employees ADD CONSTRAINT employees_pk PRIMARY KEY ( employee_id );

CREATE TABLE invoice_lines (
    invoice_line_id     NUMBER(10) NOT NULL,
    invoice_id          NUMBER(10) NOT NULL,
    product_id          NUMBER(10) NOT NULL,
    product_description VARCHAR2(20),
    quantity            NUMBER(10),
    quantity_measure    VARCHAR2(20),
    unit_price          NUMBER(10),
    total_price         NUMBER(10),
    order_id            NUMBER(10) NOT NULL,
    order_line_id       NUMBER(10) NOT NULL,
    invoices_invoice_id NUMBER(10) NOT NULL
);

ALTER TABLE invoice_lines
    ADD CONSTRAINT invoice_lines_pk PRIMARY KEY ( invoice_line_id,
                                                  invoice_id,
                                                  product_id,
                                                  order_id,
                                                  order_line_id );

CREATE TABLE invoices (
    invoice_id          NUMBER(10) NOT NULL,
    invoicing_date      DATE,
    invoice_currency    VARCHAR2(20),
    invoice_total_value NUMBER(10),
    incoterms           VARCHAR2(10),
    payment_term        CHAR(2),
    payment_date        DATE,
    blocked             CHAR(1),
    invoicing_type      CHAR(2)
);

ALTER TABLE invoices ADD CONSTRAINT invoices_pk PRIMARY KEY ( invoice_id );

CREATE TABLE order_line_items (
    order_id              NUMBER(10) NOT NULL,
    order_line_id         NUMBER(10) NOT NULL,
    product_id            NUMBER(10) NOT NULL,
    price                 NUMBER(10),
    product_quantity      NUMBER(10),
    product_measure       NUMBER(10),
    product_netvalue      NUMBER(10),
    line_item_totalvalue  NUMBER(10),
    employee_id           NUMBER(10) NOT NULL,
    currency              NUMBER(2),
    shipment_address      VARCHAR2(50) NOT NULL,
    eta                   VARCHAR2(50),
    warranty_beginning    DATE,
    warranty_ending       DATE,
    warranty_id           NUMBER(10),
    orders_order_id       NUMBER(10) NOT NULL,
    orders_customer_id    NUMBER(10) NOT NULL,
    employees_employee_id NUMBER(10) NOT NULL
);

ALTER TABLE order_line_items
    ADD CONSTRAINT order_line_items_pk PRIMARY KEY ( order_id,
                                                     order_line_id,
                                                     product_id,
                                                     shipment_address,
                                                     employee_id );

CREATE TABLE orders (
    order_id              NUMBER(10) NOT NULL,
    customer_id           NUMBER(10) NOT NULL,
    order_type            CHAR(1),
    order_date            DATE,
    order_netvalue        NUMBER(10),
    order_currency        NUMBER(1),
    cpu_date              DATE,
    creator               VARCHAR2(20),
    last_changer          VARCHAR2(20),
    last_changer_date     DATE,
    confirmed             CHAR(1),
    confirmer             VARCHAR2(20),
    confirmation_date     DATE,
    customers_customer_ıd NUMBER(10) NOT NULL
);

ALTER TABLE orders ADD CONSTRAINT orders_pk PRIMARY KEY ( order_id,
                                                          customer_id );

CREATE TABLE product_categories (
    category_id          NUMBER(10) NOT NULL,
    category_name        VARCHAR2(20),
    products_product_id  NUMBER NOT NULL,
    products_category_id NUMBER(10) NOT NULL
);

ALTER TABLE product_categories ADD CONSTRAINT product_categories_pk PRIMARY KEY ( category_id );

CREATE TABLE product_leadtimes (
    product_id                 NUMBER(10) NOT NULL,
    vendor_id                  NUMBER(10) NOT NULL,
    leadtime                   DATE,
    leadtime_m                 DATE,
    products_product_id        NUMBER NOT NULL,
    products_category_id       NUMBER(10) NOT NULL,
    vendors_vendor_id          NUMBER(10) NOT NULL,
    vendors_vendor_category_id NUMBER(10) NOT NULL
);

ALTER TABLE product_leadtimes ADD CONSTRAINT product_leadtimes_pk PRIMARY KEY ( product_id,
                                                                                vendor_id );

CREATE TABLE products (
    product_id          NUMBER NOT NULL,
    product_description VARCHAR2(250),
    list_price          NUMBER(10),
    standard_cost       NUMBER(10),
    category_id         NUMBER(10) NOT NULL,
    safetystock_level   NUMBER(10),
    reorder_point_level NUMBER(10),
    onhandinventory     CHAR(1)
);

ALTER TABLE products ADD CONSTRAINT products_pk PRIMARY KEY ( product_id,
                                                              category_id );

CREATE TABLE shipment_line_items (
    shipment_id           NUMBER(10) NOT NULL,
    shipment_line_id      NUMBER(10) NOT NULL,
    order_id              NUMBER(10) NOT NULL,
    order_line_id         NUMBER(10) NOT NULL,
    product_id            NUMBER(10) NOT NULL,
    product_measure       VARCHAR2(20),
    product_quantity      NUMBER(10),
    warehouse_id          NUMBER(10) NOT NULL,
    bin_id                NUMBER(10) NOT NULL,
    shipment_firm         VARCHAR2(20),
    net_weight            NUMBER(10),
    gross_weight          NUMBER(10),
    volume                NUMBER(10),
    weight_measure        VARCHAR2(20),
    volume_measure        VARCHAR2(20),
    good_issue_date       DATE,
    shipments_shipment_id NUMBER(10) NOT NULL,
    shipments_employee_id NUMBER(10) NOT NULL,
    shipments_customer_id NUMBER(10) NOT NULL
);

ALTER TABLE shipment_line_items
    ADD CONSTRAINT shipment_line_items_pk PRIMARY KEY ( shipment_id,
                                                        shipment_line_id,
                                                        order_id,
                                                        order_line_id,
                                                        product_id,
                                                        warehouse_id,
                                                        bin_id );

CREATE TABLE shipments (
    shipment_id            NUMBER(10) NOT NULL,
    shipment_date          DATE,
    employee_id            NUMBER(10) NOT NULL,
    document_creation_date DATE,
    document_creation_time DATE,
    customer_id            NUMBER(10) NOT NULL,
    shipment_type          CHAR(2),
    total_weight           NUMBER(10),
    shipment_firm          VARCHAR2(20),
    net_weight             NUMBER(10),
    gross_weight           NUMBER(10),
    volume                 NUMBER(10),
    weight_measure         VARCHAR2(20),
    volume_measure         VARCHAR2(20),
    blocked                CHAR(1)
);

ALTER TABLE shipments
    ADD CONSTRAINT shipments_pk PRIMARY KEY ( shipment_id,
                                              employee_id,
                                              customer_id );

CREATE TABLE vendor_category (
    vendor_category_id         NUMBER(10) NOT NULL,
    category_description       VARCHAR2(20),
    vendors_vendor_id          NUMBER(10) NOT NULL,
    vendors_vendor_category_id NUMBER(10) NOT NULL
);

ALTER TABLE vendor_category ADD CONSTRAINT vendor_category_pk PRIMARY KEY ( vendor_category_id );

CREATE TABLE vendors (
    vendor_id          NUMBER(10) NOT NULL,
    vendor_name        VARCHAR2(20),
    tax_number         NUMBER(10),
    email_address      VARCHAR2(50),
    vendor_website     VARCHAR2(50),
    customer_id        NUMBER(10),
    flat_number        NUMBER(10),
    apartment_name     VARCHAR2(20),
    apartment_no       NUMBER(50),
    street_no          NUMBER(10),
    zip_code           NUMBER(10),
    neighborhood       VARCHAR2(20),
    city               VARCHAR2(20),
    country            VARCHAR2(20),
    vendor_category_id NUMBER(10) NOT NULL,
    vendor_rank        NUMBER(10)
);

ALTER TABLE vendors ADD CONSTRAINT vendors_pk PRIMARY KEY ( vendor_id,
                                                            vendor_category_id );

CREATE TABLE warehouses (
    warehouse_id          NUMBER(10) NOT NULL,
    warehouse_name        VARCHAR2(20),
    warehouse_description VARCHAR2(20),
    location_id           NUMBER(10),
    capacity              NUMBER(10),
    manager_id            NUMBER(10),
    flat_number           NUMBER(10),
    apartment_name        VARCHAR2(20),
    apartment_no          NUMBER(10),
    street_no             NUMBER(10),
    zip_code              NUMBER(10),
    neighborhood          VARCHAR2(20),
    city                  VARCHAR2(20),
    country               VARCHAR2(20),
    phone_number          NUMBER(12),
    email                 VARCHAR2(20)
);

ALTER TABLE warehouses ADD CONSTRAINT warehouses_pk PRIMARY KEY ( warehouse_id );

ALTER TABLE bins
    ADD CONSTRAINT bins_products_fk FOREIGN KEY ( products_product_id,
                                                  products_category_id )
        REFERENCES products ( product_id,
                              category_id );

ALTER TABLE bins
    ADD CONSTRAINT bins_warehouses_fk FOREIGN KEY ( warehouses_warehouse_id )
        REFERENCES warehouses ( warehouse_id );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE customer_addresses
    ADD CONSTRAINT customer_addresses_customers_fk FOREIGN KEY ( customers_customer_ıd )
        REFERENCES customers ( customer_ıd );

ALTER TABLE customer_phones
    ADD CONSTRAINT customer_phones_customers_fk FOREIGN KEY ( customers_customer_ıd )
        REFERENCES customers ( customer_ıd );

ALTER TABLE employee_address
    ADD CONSTRAINT employee_address_employees_fk FOREIGN KEY ( employees_employee_id )
        REFERENCES employees ( employee_id );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE employee_communications
    ADD CONSTRAINT employee_communications_employees_fk FOREIGN KEY ( employees_employee_id )
        REFERENCES employees ( employee_id );

ALTER TABLE invoice_lines
    ADD CONSTRAINT invoice_lines_invoices_fk FOREIGN KEY ( invoices_invoice_id )
        REFERENCES invoices ( invoice_id );

ALTER TABLE order_line_items
    ADD CONSTRAINT order_line_items_employees_fk FOREIGN KEY ( employees_employee_id )
        REFERENCES employees ( employee_id );

ALTER TABLE order_line_items
    ADD CONSTRAINT order_line_items_orders_fk FOREIGN KEY ( orders_order_id,
                                                            orders_customer_id )
        REFERENCES orders ( order_id,
                            customer_id );

ALTER TABLE orders
    ADD CONSTRAINT orders_customers_fk FOREIGN KEY ( customers_customer_ıd )
        REFERENCES customers ( customer_ıd );

ALTER TABLE product_categories
    ADD CONSTRAINT product_categories_products_fk FOREIGN KEY ( products_product_id,
                                                                products_category_id )
        REFERENCES products ( product_id,
                              category_id );

ALTER TABLE product_leadtimes
    ADD CONSTRAINT product_leadtimes_products_fk FOREIGN KEY ( products_product_id,
                                                               products_category_id )
        REFERENCES products ( product_id,
                              category_id );

ALTER TABLE product_leadtimes
    ADD CONSTRAINT product_leadtimes_vendors_fk FOREIGN KEY ( vendors_vendor_id,
                                                              vendors_vendor_category_id )
        REFERENCES vendors ( vendor_id,
                             vendor_category_id );

--  ERROR: FK name length exceeds maximum allowed length(30) 
ALTER TABLE shipment_line_items
    ADD CONSTRAINT shipment_line_items_shipments_fk FOREIGN KEY ( shipments_shipment_id,
                                                                  shipments_employee_id,
                                                                  shipments_customer_id )
        REFERENCES shipments ( shipment_id,
                               employee_id,
                               customer_id );

ALTER TABLE vendor_category
    ADD CONSTRAINT vendor_category_vendors_fk FOREIGN KEY ( vendors_vendor_id,
                                                            vendors_vendor_category_id )
        REFERENCES vendors ( vendor_id,
                             vendor_category_id );



-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            19
-- CREATE INDEX                             0
-- ALTER TABLE                             34
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   3
-- WARNINGS                                 0
